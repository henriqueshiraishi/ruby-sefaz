# frozen_string_literal: true

require "test_helper"

class SEFAZ::Webservice::NFE::TestDataset < Minitest::Test

  def test_is_the_dataset_is_working
    chaveNF = "35221221684155000164550010000002361125429343"
    dataset = SEFAZ::Webservice::NFE::Dataset.new(chaveNF)
    
    dataset.ide.cUF = "35"
    dataset.emit.CNPJ = "XXX.XXX.XXX/XXXX-XX"
    dataset.emit.xNome = "XXXXXXXXXXXXXXXXXXXX"
    dataset.dest.CNPJ = "ZZZ.ZZZ.ZZZ/ZZZZ-ZZ"
    dataset.dest.xNome = "ZZZZZZZZZZZZZZZZZZZZ"

    dataset.add("REBOQUE") do |reboque|
      reboque.placa = "XX"
      reboque.UF = "XX"
      reboque.RNTC = "XX"
    end

    dataset.add("REBOQUE") do |reboque|
      reboque.placa = "ZZ"
      reboque.UF = "ZZ"
      reboque.RNTC = "ZZ"
    end

    dataset.infAdic.infCpl = "Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates perferendis velit vitae a, nam id cumque architecto optio. Repellendus dolorem quas nam vel odit temporibus provident natus, accusamus molestiae in?"
    xml, hash = dataset.gerarNF

    assert_equal xml, '<NFe xmlns="http://www.portalfiscal.inf.br/nfe"><infNFe Id="NFe35221221684155000164550010000002361125429343" versao="4.00"><ide><cUF>35</cUF></ide><emit><CNPJ>XXX.XXX.XXX/XXXX-XX</CNPJ><xNome>XXXXXXXXXXXXXXXXXXXX</xNome></emit><dest><CNPJ>ZZZ.ZZZ.ZZZ/ZZZZ-ZZ</CNPJ><xNome>ZZZZZZZZZZZZZZZZZZZZ</xNome></dest><transp><reboque><placa>XX</placa><UF>XX</UF><RNTC>XX</RNTC></reboque><reboque><placa>ZZ</placa><UF>ZZ</UF><RNTC>ZZ</RNTC></reboque></transp><infAdic><infCpl>Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates perferendis velit vitae a, nam id cumque architecto optio. Repellendus dolorem quas nam vel odit temporibus provident natus, accusamus molestiae in?</infCpl></infAdic></infNFe></NFe>'
    assert_equal hash[:NFe][:infNFe][:@Id], "NFe35221221684155000164550010000002361125429343"
    assert_equal hash[:NFe][:infNFe][:@versao], "4.00"
    assert_equal hash[:NFe][:infNFe][:ide][:cUF], "35"
    assert_equal hash[:NFe][:infNFe][:emit][:CNPJ], "XXX.XXX.XXX/XXXX-XX"
    assert_equal hash[:NFe][:infNFe][:dest][:CNPJ], "ZZZ.ZZZ.ZZZ/ZZZZ-ZZ"
    assert_equal hash[:NFe][:infNFe][:transp][:reboque].class, Array
    assert_equal hash[:NFe][:infNFe][:transp][:reboque].length, 2
    assert_equal hash[:NFe][:infNFe][:transp][:reboque].first[:placa], 'XX'
    assert_equal hash[:NFe][:infNFe][:transp][:reboque].last[:placa], 'ZZ'
    assert_equal hash[:NFe][:infNFe][:infAdic][:infCpl], "Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates perferendis velit vitae a, nam id cumque architecto optio. Repellendus dolorem quas nam vel odit temporibus provident natus, accusamus molestiae in?"
  end

  def test_if_field_can_be_set
    chaveNF = "35221221684155000164550010000002361125429343"
    dataset = SEFAZ::Webservice::NFE::Dataset.new(chaveNF)
    dataset.ide.cUF = ""
    dataset.ide.cNF = ""
    dataset.ide.natOp = ""
    dataset.ide.mod = ""
    dataset.ide.serie = ""
    dataset.ide.nNF = ""
    dataset.ide.dhEmi = ""
    dataset.ide.dhSaiEnt = ""
    dataset.ide.tpNF = ""
    dataset.ide.idDest = ""
    dataset.ide.cMunFG = ""
    dataset.ide.tpImp = ""
    dataset.ide.tpEmis = ""
    dataset.ide.cDV = ""
    dataset.ide.tpAmb = ""
    dataset.ide.finNFe = ""
    dataset.ide.indFinal = ""
    dataset.ide.indPres = ""
    dataset.ide.indIntermed = ""
    dataset.ide.procEmi = ""
    dataset.ide.verProc = ""
    dataset.ide.dhCont = ""
    dataset.ide.xJust = ""
    dataset.add("NFREF") do |nfref|
      nfref.refNFe = ""
      nfref.cUF = ""
      nfref.AAMM = ""
      nfref.CNPJ = ""
      nfref.CPF = ""
      nfref.IE = ""
      nfref.mod = ""
      nfref.serie = ""
      nfref.nNF = ""
      nfref.refCTe = ""
      nfref.nECF = ""
      nfref.nCOO = ""
    end
    dataset.emit.CNPJ = ""
    dataset.emit.CPF = ""
    dataset.emit.xNome = ""
    dataset.emit.xFant = ""
    dataset.emit.enderEmit.xLgr = ""
    dataset.emit.enderEmit.nro = ""
    dataset.emit.enderEmit.xCpl = ""
    dataset.emit.enderEmit.xBairro = ""
    dataset.emit.enderEmit.cMun = ""
    dataset.emit.enderEmit.xMun = ""
    dataset.emit.enderEmit.UF = ""
    dataset.emit.enderEmit.CEP = ""
    dataset.emit.enderEmit.cPais = ""
    dataset.emit.enderEmit.xPais = ""
    dataset.emit.enderEmit.fone = ""
    dataset.emit.IE = ""
    dataset.emit.IEST = ""
    dataset.emit.IM = ""
    dataset.emit.CNAE = ""
    dataset.emit.CRT = ""
    dataset.avulsa.CNPJ = ""
    dataset.avulsa.xOrgao = ""
    dataset.avulsa.matr = ""
    dataset.avulsa.xAgente = ""
    dataset.avulsa.fone = ""
    dataset.avulsa.UF = ""
    dataset.avulsa.nDAR = ""
    dataset.avulsa.dEmi = ""
    dataset.avulsa.vDAR = ""
    dataset.avulsa.repEmi = ""
    dataset.avulsa.dPag = ""
    dataset.dest.CNPJ = ""
    dataset.dest.CPF = ""
    dataset.dest.idEstrangeiro = ""
    dataset.dest.xNome = ""
    dataset.dest.enderDest.xLgr = ""
    dataset.dest.enderDest.nro = ""
    dataset.dest.enderDest.xCpl = ""
    dataset.dest.enderDest.xBairro = ""
    dataset.dest.enderDest.cMun = ""
    dataset.dest.enderDest.xMun = ""
    dataset.dest.enderDest.UF = ""
    dataset.dest.enderDest.CEP = ""
    dataset.dest.enderDest.cPais = ""
    dataset.dest.enderDest.xPais = ""
    dataset.dest.enderDest.fone = ""
    dataset.dest.indIEDest = ""
    dataset.dest.IE = ""
    dataset.dest.ISUF = ""
    dataset.dest.IM = ""
    dataset.dest.email = ""
    dataset.retirada.CNPJ = ""
    dataset.retirada.CPF = ""
    dataset.retirada.xNome = ""
    dataset.retirada.xLgr = ""
    dataset.retirada.nro = ""
    dataset.retirada.xCpl = ""
    dataset.retirada.xBairro = ""
    dataset.retirada.cMun = ""
    dataset.retirada.xMun = ""
    dataset.retirada.UF = ""
    dataset.retirada.CEP = ""
    dataset.retirada.cPais = ""
    dataset.retirada.xPais = ""
    dataset.retirada.fone = ""
    dataset.retirada.email = ""
    dataset.retirada.IE = ""
    dataset.entrega.CNPJ = ""
    dataset.entrega.CPF = ""
    dataset.entrega.xNome = ""
    dataset.entrega.xLgr = ""
    dataset.entrega.nro = ""
    dataset.entrega.xCpl = ""
    dataset.entrega.xBairro = ""
    dataset.entrega.cMun = ""
    dataset.entrega.xMun = ""
    dataset.entrega.UF = ""
    dataset.entrega.CEP = ""
    dataset.entrega.cPais = ""
    dataset.entrega.xPais = ""
    dataset.entrega.fone = ""
    dataset.entrega.email = ""
    dataset.entrega.IE = ""
    dataset.add("AUTXML") do |autxml|
      autxml.CNPJ = ""
      autxml.CPF = ""
    end
    dataset.add("DET") do |det|
      det.prod.cProd = ""
      det.prod.cEAN = ""
      det.prod.xProd = ""
      det.prod.NCM = ""
      det.prod.NVE = ""
      det.prod.CEST = ""
      det.prod.indEscala = ""
      det.prod.CNPJFab = ""
      det.prod.cBenef = ""
      det.prod.EXTIPI = ""
      det.prod.CFOP = ""
      det.prod.uCom = ""
      det.prod.qCom = ""
      det.prod.vUnCom = ""
      det.prod.vProd = ""
      det.prod.cEANTrib = ""
      det.prod.uTrib = ""
      det.prod.qTrib = ""
      det.prod.vUnTrib = ""
      det.prod.vFrete = ""
      det.prod.vSeg = ""
      det.prod.vDesc = ""
      det.prod.vOutro = ""
      det.prod.indTot = ""
      det.prod.xPed = ""
      det.prod.nItemPed = ""
      det.prod.nFCI = ""
      det.prod.nRECOPI = ""
      dataset.add("DI") do |di|
        di.nDI = ""
        di.dDI = ""
        di.xLocDesemb = ""
        di.UFDesemb = ""
        di.dDesemb = ""
        di.tpViaTransp = ""
        di.vAFRMM = ""
        di.tpIntermedio = ""
        di.CNPJ = ""
        di.UFTerceiro = ""
        di.cExportador = ""
        dataset.add("ADI") do |adi|
          adi.nAdicao = "" 
          adi.nSeqAdic = "" 
          adi.cFabricante = "" 
          adi.vDescDI = "" 
          adi.nDraw = ""
        end
      end
      dataset.add("DETEXPORT") do |detexport|
        detexport.nDraw = ""
        detexport.exportInd.nRE = ""
        detexport.exportInd.chNFe = ""
        detexport.exportInd.qExport = ""
      end
      dataset.add("RASTRO") do |rastro|
        rastro.nLote = ""
        rastro.qLote = ""
        rastro.dFab = ""
        rastro.dVal = ""
        rastro.cAgreg = ""
      end
      det.prod.veicProd.tpOp = ""
      det.prod.veicProd.chassi = ""
      det.prod.veicProd.cCor = ""
      det.prod.veicProd.xCor = ""
      det.prod.veicProd.pot = ""
      det.prod.veicProd.cilin = ""
      det.prod.veicProd.pesoL = ""
      det.prod.veicProd.pesoB = ""
      det.prod.veicProd.nSerie = ""
      det.prod.veicProd.tpComb = ""
      det.prod.veicProd.nMotor = ""
      det.prod.veicProd.CMT = ""
      det.prod.veicProd.dist = ""
      det.prod.veicProd.anoMod = ""
      det.prod.veicProd.anoFab = ""
      det.prod.veicProd.tpPint = ""
      det.prod.veicProd.tpVeic = ""
      det.prod.veicProd.espVeic = ""
      det.prod.veicProd.VIN = ""
      det.prod.veicProd.condVeic = ""
      det.prod.veicProd.cMod = ""
      det.prod.veicProd.cCorDENATRAN = ""
      det.prod.veicProd.lota = ""
      det.prod.veicProd.tpRest = ""
      det.prod.med.cProdANVISA = ""
      det.prod.med.xMotivoIsencao = ""
      det.prod.med.vPMC = ""
      dataset.add("ARMA") do |arma|
        arma.tpArma = ""
        arma.nSerie = ""
        arma.nCano = ""
        arma.descr = ""
      end
      det.prod.comb.cProdANP = ""
      det.prod.comb.descANP = ""
      det.prod.comb.pGLP = ""
      det.prod.comb.pGNn = ""
      det.prod.comb.pGNi = ""
      det.prod.comb.vPart = ""
      det.prod.comb.CODIF = ""
      det.prod.comb.qTemp = ""
      det.prod.comb.UFCons = "" 
      det.prod.comb.CIDE.qBCProd = ""
      det.prod.comb.CIDE.vAliqProd = ""
      det.prod.comb.CIDE.vCIDE = ""
      det.prod.comb.encerrante.nBico = ""
      det.prod.comb.encerrante.nBomba = ""
      det.prod.comb.encerrante.nTanque = ""
      det.prod.comb.encerrante.vEncIni = ""
      det.prod.comb.encerrante.vEncFin = ""
      det.imposto.vTotTrib = ""
      det.imposto.ICMS.ICMS00.orig = ""
      det.imposto.ICMS.ICMS00.CST = ""
      det.imposto.ICMS.ICMS00.modBC = ""
      det.imposto.ICMS.ICMS00.vBC = ""
      det.imposto.ICMS.ICMS00.pICMS = ""
      det.imposto.ICMS.ICMS00.vICMS = ""
      det.imposto.ICMS.ICMS00.pFCP = ""
      det.imposto.ICMS.ICMS00.vFCP = ""
      det.imposto.ICMS.ICMS10.orig = ""
      det.imposto.ICMS.ICMS10.CST = ""
      det.imposto.ICMS.ICMS10.modBC = ""
      det.imposto.ICMS.ICMS10.vBC = ""
      det.imposto.ICMS.ICMS10.pICMS = ""
      det.imposto.ICMS.ICMS10.vICMS = ""
      det.imposto.ICMS.ICMS10.vBCFCP = ""
      det.imposto.ICMS.ICMS10.pFCP = ""
      det.imposto.ICMS.ICMS10.vFCP = ""
      det.imposto.ICMS.ICMS10.modBCST = ""
      det.imposto.ICMS.ICMS10.pMVAST = ""
      det.imposto.ICMS.ICMS10.pRedBCST = ""
      det.imposto.ICMS.ICMS10.vBCST = ""
      det.imposto.ICMS.ICMS10.pICMSST = ""
      det.imposto.ICMS.ICMS10.vICMSST = ""
      det.imposto.ICMS.ICMS10.vBCFCPST = ""
      det.imposto.ICMS.ICMS10.pFCPST = ""
      det.imposto.ICMS.ICMS10.vFCPST = ""
      det.imposto.ICMS.ICMS20.orig = ""
      det.imposto.ICMS.ICMS20.CST = ""
      det.imposto.ICMS.ICMS20.modBC = ""
      det.imposto.ICMS.ICMS20.pRedBC = ""
      det.imposto.ICMS.ICMS20.vBC = ""
      det.imposto.ICMS.ICMS20.pICMS = ""
      det.imposto.ICMS.ICMS20.vICMS = ""
      det.imposto.ICMS.ICMS20.vBCFCP = ""
      det.imposto.ICMS.ICMS20.pFCP = ""
      det.imposto.ICMS.ICMS20.vFCP = ""
      det.imposto.ICMS.ICMS20.vICMSDeson = ""
      det.imposto.ICMS.ICMS20.motDesICMS = ""
      det.imposto.ICMS.ICMS30.orig = ""
      det.imposto.ICMS.ICMS30.CST = ""
      det.imposto.ICMS.ICMS30.modBCST = ""
      det.imposto.ICMS.ICMS30.pMVAST = ""
      det.imposto.ICMS.ICMS30.pRedBCST = ""
      det.imposto.ICMS.ICMS30.vBCST = ""
      det.imposto.ICMS.ICMS30.pICMSST = ""
      det.imposto.ICMS.ICMS30.vICMSST = ""
      det.imposto.ICMS.ICMS30.vBCFCPST = ""
      det.imposto.ICMS.ICMS30.pFCPST = ""
      det.imposto.ICMS.ICMS30.vFCPST = ""
      det.imposto.ICMS.ICMS30.vICMSDeson = ""
      det.imposto.ICMS.ICMS30.motDesICMS = ""
      det.imposto.ICMS.ICMS40.orig = ""
      det.imposto.ICMS.ICMS40.CST = ""
      det.imposto.ICMS.ICMS40.vICMSDeson = ""
      det.imposto.ICMS.ICMS40.motDesICMS = ""
      det.imposto.ICMS.ICMS51.orig = ""
      det.imposto.ICMS.ICMS51.CST = ""
      det.imposto.ICMS.ICMS51.modBC = ""
      det.imposto.ICMS.ICMS51.pRedBC = ""
      det.imposto.ICMS.ICMS51.vBC = ""
      det.imposto.ICMS.ICMS51.pICMS = ""
      det.imposto.ICMS.ICMS51.vICMSOp = ""
      det.imposto.ICMS.ICMS51.pDif = ""
      det.imposto.ICMS.ICMS51.vICMSDif = ""
      det.imposto.ICMS.ICMS51.vICMS = ""
      det.imposto.ICMS.ICMS51.vBCFCP = ""
      det.imposto.ICMS.ICMS51.pFCP = ""
      det.imposto.ICMS.ICMS51.vFCP = ""
      det.imposto.ICMS.ICMS60.orig = ""
      det.imposto.ICMS.ICMS60.CST = ""
      det.imposto.ICMS.ICMS60.vBCSTRet = ""
      det.imposto.ICMS.ICMS60.pST = ""
      det.imposto.ICMS.ICMS60.vICMSSubstituto = ""
      det.imposto.ICMS.ICMS60.vICMSSTRet = ""
      det.imposto.ICMS.ICMS60.vBCFCPSTRet = ""
      det.imposto.ICMS.ICMS60.pFCPSTRet = ""
      det.imposto.ICMS.ICMS60.vFCPSTRet = ""
      det.imposto.ICMS.ICMS60.pRedBCEfet = ""
      det.imposto.ICMS.ICMS60.vBCEfet = ""
      det.imposto.ICMS.ICMS60.pICMSEfet = ""
      det.imposto.ICMS.ICMS60.vICMSEfet = ""
      det.imposto.ICMS.ICMS70.orig = ""
      det.imposto.ICMS.ICMS70.CST = ""
      det.imposto.ICMS.ICMS70.modBC = ""
      det.imposto.ICMS.ICMS70.pRedBC = ""
      det.imposto.ICMS.ICMS70.vBC = ""
      det.imposto.ICMS.ICMS70.pICMS = ""
      det.imposto.ICMS.ICMS70.vICMS = ""
      det.imposto.ICMS.ICMS70.vBCFCP = ""
      det.imposto.ICMS.ICMS70.pFCP = ""
      det.imposto.ICMS.ICMS70.vFCP = ""
      det.imposto.ICMS.ICMS70.modBCST = ""
      det.imposto.ICMS.ICMS70.pMVAST = ""
      det.imposto.ICMS.ICMS70.pRedBCST = ""
      det.imposto.ICMS.ICMS70.vBCST = ""
      det.imposto.ICMS.ICMS70.pICMSST = ""
      det.imposto.ICMS.ICMS70.vICMSST = ""
      det.imposto.ICMS.ICMS70.vBCFCPST = ""
      det.imposto.ICMS.ICMS70.pFCPST = ""
      det.imposto.ICMS.ICMS70.vFCPST = ""
      det.imposto.ICMS.ICMS70.vICMSDeson = ""
      det.imposto.ICMS.ICMS70.motDesICMS = ""
      det.imposto.ICMS.ICMS90.orig = ""
      det.imposto.ICMS.ICMS90.CST = ""
      det.imposto.ICMS.ICMS90.modBC = ""
      det.imposto.ICMS.ICMS90.vBC = ""
      det.imposto.ICMS.ICMS90.pRedBC = ""
      det.imposto.ICMS.ICMS90.pICMS = ""
      det.imposto.ICMS.ICMS90.vICMS = ""
      det.imposto.ICMS.ICMS90.vBCFCP = ""
      det.imposto.ICMS.ICMS90.pFCP = ""
      det.imposto.ICMS.ICMS90.vFCP = ""
      det.imposto.ICMS.ICMS90.modBCST = ""
      det.imposto.ICMS.ICMS90.pMVAST = ""
      det.imposto.ICMS.ICMS90.pRedBCST = ""
      det.imposto.ICMS.ICMS90.vBCST = ""
      det.imposto.ICMS.ICMS90.pICMSST = ""
      det.imposto.ICMS.ICMS90.vICMSST = ""
      det.imposto.ICMS.ICMS90.vBCFCPST = ""
      det.imposto.ICMS.ICMS90.pFCPST = ""
      det.imposto.ICMS.ICMS90.vFCPST = ""
      det.imposto.ICMS.ICMS90.vICMSDeson = ""
      det.imposto.ICMS.ICMS90.motDesICMS = ""
      det.imposto.ICMS.ICMSPart.orig = ""
      det.imposto.ICMS.ICMSPart.CST = ""
      det.imposto.ICMS.ICMSPart.modBC = ""
      det.imposto.ICMS.ICMSPart.vBC = ""
      det.imposto.ICMS.ICMSPart.pRedBC = ""
      det.imposto.ICMS.ICMSPart.pICMS = ""
      det.imposto.ICMS.ICMSPart.vICMS = ""
      det.imposto.ICMS.ICMSPart.modBCST = ""
      det.imposto.ICMS.ICMSPart.pMVAST = ""
      det.imposto.ICMS.ICMSPart.pRedBCST = ""
      det.imposto.ICMS.ICMSPart.vBCST = ""
      det.imposto.ICMS.ICMSPart.pICMSST = ""
      det.imposto.ICMS.ICMSPart.vICMSST = ""
      det.imposto.ICMS.ICMSPart.pBCOp = ""
      det.imposto.ICMS.ICMSPart.UFST = ""
      det.imposto.ICMS.ICMSST.orig = ""
      det.imposto.ICMS.ICMSST.CST = ""
      det.imposto.ICMS.ICMSST.vBCSTRet = ""
      det.imposto.ICMS.ICMSST.pST = ""
      det.imposto.ICMS.ICMSST.vICMSSubstituto = ""
      det.imposto.ICMS.ICMSST.vICMSSTRet = ""
      det.imposto.ICMS.ICMSST.vBCFCPSTRet = ""
      det.imposto.ICMS.ICMSST.pFCPSTRet = ""
      det.imposto.ICMS.ICMSST.vFCPSTRet = ""
      det.imposto.ICMS.ICMSST.vBCSTDest = ""
      det.imposto.ICMS.ICMSST.vICMSSTDest = ""
      det.imposto.ICMS.ICMSST.pRedBCEfet = ""
      det.imposto.ICMS.ICMSST.vBCEfet = ""
      det.imposto.ICMS.ICMSST.pICMSEfet = ""
      det.imposto.ICMS.ICMSST.vICMSEfet = ""
      det.imposto.ICMS.ICMSSN101.orig = ""
      det.imposto.ICMS.ICMSSN101.CSOSN = ""
      det.imposto.ICMS.ICMSSN101.pCredSN = ""
      det.imposto.ICMS.ICMSSN101.vCredICMSSN = ""
      det.imposto.ICMS.ICMSSN102.orig = ""
      det.imposto.ICMS.ICMSSN102.CSOSN = ""
      det.imposto.ICMS.ICMSSN201.orig = ""
      det.imposto.ICMS.ICMSSN201.CSOSN = ""
      det.imposto.ICMS.ICMSSN201.modBCST = ""
      det.imposto.ICMS.ICMSSN201.pMVAST = ""
      det.imposto.ICMS.ICMSSN201.pRedBCST = ""
      det.imposto.ICMS.ICMSSN201.vBCST = ""
      det.imposto.ICMS.ICMSSN201.pICMSST = ""
      det.imposto.ICMS.ICMSSN201.vICMSST = ""
      det.imposto.ICMS.ICMSSN201.vBCFCPST = ""
      det.imposto.ICMS.ICMSSN201.pFCPST = ""
      det.imposto.ICMS.ICMSSN201.vFCPST = ""
      det.imposto.ICMS.ICMSSN201.pCredSN = ""
      det.imposto.ICMS.ICMSSN201.vCredICMSSN = ""
      det.imposto.ICMS.ICMSSN202.orig = ""
      det.imposto.ICMS.ICMSSN202.CSOSN = ""
      det.imposto.ICMS.ICMSSN202.modBCST = ""
      det.imposto.ICMS.ICMSSN202.pMVAST = ""
      det.imposto.ICMS.ICMSSN202.pRedBCST = ""
      det.imposto.ICMS.ICMSSN202.vBCST = ""
      det.imposto.ICMS.ICMSSN202.pICMSST = ""
      det.imposto.ICMS.ICMSSN202.vICMSST = ""
      det.imposto.ICMS.ICMSSN202.vBCFCPST = ""
      det.imposto.ICMS.ICMSSN202.pFCPST = ""
      det.imposto.ICMS.ICMSSN202.vFCPST = ""
      det.imposto.ICMS.ICMSSN500.orig = ""
      det.imposto.ICMS.ICMSSN500.CSOSN = ""
      det.imposto.ICMS.ICMSSN500.vBCSTRet = ""
      det.imposto.ICMS.ICMSSN500.pST = ""
      det.imposto.ICMS.ICMSSN500.vICMSSubstituto = ""
      det.imposto.ICMS.ICMSSN500.vICMSSTRet = ""
      det.imposto.ICMS.ICMSSN500.vBCFCPSTRet = ""
      det.imposto.ICMS.ICMSSN500.pFCPSTRet = ""
      det.imposto.ICMS.ICMSSN500.vFCPSTRet = ""
      det.imposto.ICMS.ICMSSN500.pRedBCEfet = ""
      det.imposto.ICMS.ICMSSN500.vBCEfet = ""
      det.imposto.ICMS.ICMSSN500.pICMSEfet = ""
      det.imposto.ICMS.ICMSSN500.vICMSEfet = ""
      det.imposto.ICMS.ICMSSN900.orig = ""
      det.imposto.ICMS.ICMSSN900.CSOSN = ""
      det.imposto.ICMS.ICMSSN900.modBC = ""
      det.imposto.ICMS.ICMSSN900.vBC = ""
      det.imposto.ICMS.ICMSSN900.pRedBC = ""
      det.imposto.ICMS.ICMSSN900.pICMS = ""
      det.imposto.ICMS.ICMSSN900.vICMS = ""
      det.imposto.ICMS.ICMSSN900.modBCST = ""
      det.imposto.ICMS.ICMSSN900.pMVAST = ""
      det.imposto.ICMS.ICMSSN900.pRedBCST = ""
      det.imposto.ICMS.ICMSSN900.vBCST = ""
      det.imposto.ICMS.ICMSSN900.pICMSST = ""
      det.imposto.ICMS.ICMSSN900.vICMSST = ""
      det.imposto.ICMS.ICMSSN900.vBCFCPST = ""
      det.imposto.ICMS.ICMSSN900.pFCPST = ""
      det.imposto.ICMS.ICMSSN900.vFCPST = ""
      det.imposto.ICMS.ICMSSN900.pCredSN = ""
      det.imposto.ICMS.ICMSSN900.vCredICMSSN = ""
      det.imposto.ICMSUFDest.vBCUFDest = ""
      det.imposto.ICMSUFDest.vBCFCPUFDest = ""
      det.imposto.ICMSUFDest.pFCPUFDest = ""
      det.imposto.ICMSUFDest.pICMSUFDest = ""
      det.imposto.ICMSUFDest.pICMSInter = ""
      det.imposto.ICMSUFDest.pICMSInterPart = ""
      det.imposto.ICMSUFDest.vFCPUFDest = ""
      det.imposto.ICMSUFDest.vICMSUFDest = ""
      det.imposto.ICMSUFDest.vICMSUFRemet = ""
      det.imposto.IPI.CNPJProd = ""
      det.imposto.IPI.cSelo = ""
      det.imposto.IPI.qSelo = ""
      det.imposto.IPI.cEnq = ""
      det.imposto.IPI.IPITrib.CST = ""
      det.imposto.IPI.IPITrib.vBC = ""
      det.imposto.IPI.IPITrib.qUnid = ""
      det.imposto.IPI.IPITrib.vUnid = ""
      det.imposto.IPI.IPITrib.vIPI = ""
      det.imposto.IPI.IPINT.CST = ""
      det.imposto.II.vBC = ""
      det.imposto.II.vDespAdu = ""
      det.imposto.II.vII = ""
      det.imposto.II.vIOF = ""
      det.imposto.PIS.PISAliq.CST = ""
      det.imposto.PIS.PISAliq.vBC = ""
      det.imposto.PIS.PISAliq.pPIS = ""
      det.imposto.PIS.PISAliq.vPIS = ""
      det.imposto.PIS.PISQtde.CST = ""
      det.imposto.PIS.PISQtde.qBCProd = ""
      det.imposto.PIS.PISQtde.vAliqProd = ""
      det.imposto.PIS.PISQtde.vPIS = ""
      det.imposto.PIS.PISNT.CST = ""
      det.imposto.PIS.PISOutr.CST = ""
      det.imposto.PIS.PISOutr.vBC = ""
      det.imposto.PIS.PISOutr.pPIS = ""
      det.imposto.PIS.PISOutr.qBCProd = ""
      det.imposto.PIS.PISOutr.vAliqProd = ""
      det.imposto.PIS.PISOutr.vPIS = ""
      det.imposto.PISST.vBC = ""
      det.imposto.PISST.pPIS = ""
      det.imposto.PISST.qBCProd = ""
      det.imposto.PISST.vAliqProd = ""
      det.imposto.PISST.vPIS = ""
      det.imposto.COFINS.COFINSAliq.CST = ""
      det.imposto.COFINS.COFINSAliq.vBC = ""
      det.imposto.COFINS.COFINSAliq.pCOFINS = ""
      det.imposto.COFINS.COFINSAliq.vCOFINS = ""
      det.imposto.COFINS.COFINSQtde.CST = ""
      det.imposto.COFINS.COFINSQtde.qBCProd = ""
      det.imposto.COFINS.COFINSQtde.vAliqProd = ""
      det.imposto.COFINS.COFINSQtde.vCOFINS = ""
      det.imposto.COFINS.COFINSNT.CST = ""
      det.imposto.COFINS.COFINSOutr.CST = ""
      det.imposto.COFINS.COFINSOutr.vBC = ""
      det.imposto.COFINS.COFINSOutr.pCOFINS = ""
      det.imposto.COFINS.COFINSOutr.qBCProd = ""
      det.imposto.COFINS.COFINSOutr.vAliqProd = ""
      det.imposto.COFINS.COFINSOutr.vCOFINS = ""
      det.imposto.COFINSST.vBC = ""
      det.imposto.COFINSST.pCOFINS = ""
      det.imposto.COFINSST.qBCProd = ""
      det.imposto.COFINSST.vAliqProd = ""
      det.imposto.COFINSST.vCOFINS = ""
      det.imposto.ISSQN.vBC = ""
      det.imposto.ISSQN.vAliq = ""
      det.imposto.ISSQN.vISSQN = ""
      det.imposto.ISSQN.cMunFG = ""
      det.imposto.ISSQN.cListServ = ""
      det.imposto.ISSQN.vDeducao = ""
      det.imposto.ISSQN.vOutro = ""
      det.imposto.ISSQN.vDescIncond = ""
      det.imposto.ISSQN.vDescCond = ""
      det.imposto.ISSQN.vISSRet = ""
      det.imposto.ISSQN.indISS = ""
      det.imposto.ISSQN.cServico = ""
      det.imposto.ISSQN.cMun = ""
      det.imposto.ISSQN.cPais = ""
      det.imposto.ISSQN.nProcesso = ""
      det.imposto.ISSQN.indIncentivo = ""
      det.impostoDevol.pDevol = ""
      det.impostoDevol.IPI.vIPIDevol = ""
      det.infAdProd = ""
    end
    dataset.total.ICMSTot.vBC = ""
    dataset.total.ICMSTot.vICMS = ""
    dataset.total.ICMSTot.vICMSDeson = ""
    dataset.total.ICMSTot.vFCPUFDest = ""
    dataset.total.ICMSTot.vICMSUFDest = ""
    dataset.total.ICMSTot.vICMSUFRemet = ""
    dataset.total.ICMSTot.vFCP = ""
    dataset.total.ICMSTot.vBCST = ""
    dataset.total.ICMSTot.vST = ""
    dataset.total.ICMSTot.vFCPST = ""
    dataset.total.ICMSTot.vFCPSTRet = ""
    dataset.total.ICMSTot.vProd = ""
    dataset.total.ICMSTot.vFrete = ""
    dataset.total.ICMSTot.vSeg = ""
    dataset.total.ICMSTot.vDesc = ""
    dataset.total.ICMSTot.vII = ""
    dataset.total.ICMSTot.vIPI = ""
    dataset.total.ICMSTot.vIPIDevol = ""
    dataset.total.ICMSTot.vPIS = ""
    dataset.total.ICMSTot.vCOFINS = ""
    dataset.total.ICMSTot.vOutro = ""
    dataset.total.ICMSTot.vNF = ""
    dataset.total.ICMSTot.vTotTrib = ""
    dataset.total.ISSQNtot.vServ = ""
    dataset.total.ISSQNtot.vBC = ""
    dataset.total.ISSQNtot.vISS = ""
    dataset.total.ISSQNtot.vPIS = ""
    dataset.total.ISSQNtot.vCOFINS = ""
    dataset.total.ISSQNtot.dCompet = ""
    dataset.total.ISSQNtot.vDeducao = ""
    dataset.total.ISSQNtot.vOutro = ""
    dataset.total.ISSQNtot.vDescIncond = ""
    dataset.total.ISSQNtot.vDescCond = ""
    dataset.total.ISSQNtot.vISSRet = ""
    dataset.total.ISSQNtot.cRegTrib = ""
    dataset.total.retTrib.vRetPIS = ""
    dataset.total.retTrib.vRetCOFINS = ""
    dataset.total.retTrib.vRetCSLL = ""
    dataset.total.retTrib.vBCIRRF = ""
    dataset.total.retTrib.vIRRF = ""
    dataset.total.retTrib.vBCRetPrev = ""
    dataset.total.retTrib.vRetPrev = ""
    dataset.transp.modFrete = ""
    dataset.transp.vagao = ""
    dataset.transp.balsa = ""
    dataset.transp.transporta.CNPJ = ""
    dataset.transp.transporta.CPF = ""
    dataset.transp.transporta.xNome = ""
    dataset.transp.transporta.IE = ""
    dataset.transp.transporta.xEnder = ""
    dataset.transp.transporta.xMun = ""
    dataset.transp.transporta.UF = ""
    dataset.transp.retTransp.vServ = ""
    dataset.transp.retTransp.vBCRet = ""
    dataset.transp.retTransp.pICMSRet = ""
    dataset.transp.retTransp.vICMSRet = ""
    dataset.transp.retTransp.CFOP = ""
    dataset.transp.retTransp.cMunFG = ""
    dataset.transp.veicTransp.placa = ""
    dataset.transp.veicTransp.UF = ""
    dataset.transp.veicTransp.RNTC = ""
    dataset.add("REBOQUE") do |reboque|
      reboque.placa = ""
      reboque.UF = ""
      reboque.RNTC = ""
    end
    dataset.add("VOL") do |vol|
      vol.qVol = ""
      vol.esp = ""
      vol.marca = ""
      vol.nVol = ""
      vol.pesoL = ""
      vol.pesoB = ""
      dataset.add("LACRES") do |lacres|
        lacres.nLacre = ""
      end
    end
    dataset.cobr.fat.nFat = ""
    dataset.cobr.fat.vOrig = ""
    dataset.cobr.fat.vDesc = ""
    dataset.cobr.fat.vLiq = ""
    dataset.add("DUP") do |dup|
      dup.nDup = ""
      dup.dVenc = ""
      dup.vDup = ""
    end
    dataset.add("DETPAG") do |detpag|
      detpag.indPag = ""
      detpag.tPag = ""
      detpag.vPag = ""
      detpag.card.tpIntegra = ""
      detpag.card.CNPJ = ""
      detpag.card.tBand = ""
      detpag.card.cAut = ""
      detpag.vTroco = ""
    end
    dataset.infIntermed.CNPJ = ""
    dataset.infIntermed.idCadIntTran = ""
    dataset.infAdic.infAdFisco = ""
    dataset.infAdic.infCpl = ""
    dataset.add("OBSCONT") do |obscont|
      obscont.xCampo = ""
      obscont.xTexto = ""
    end
    dataset.add("OBSFISCO") do |obsfisco|
      obsfisco.xCampo = ""
      obsfisco.xTexto = ""
    end
    dataset.add("PROCREF") do |procref|
      procref.nProc = ""
      procref.indProc = ""
    end
    dataset.exporta.UFSaidaPais = ""
    dataset.exporta.xLocExporta = ""
    dataset.exporta.xLocDespacho = ""
    dataset.compra.xNEmp = ""
    dataset.compra.xPed = ""
    dataset.compra.xCont = ""
    dataset.cana.safra = ""
    dataset.cana.ref = ""
    dataset.cana.qTotMes = ""
    dataset.cana.qTotAnt = ""
    dataset.cana.qTotGer = ""
    dataset.cana.vFor = ""
    dataset.cana.vTotDed = ""
    dataset.cana.vLiqFor = ""
    dataset.add("FORDIA") do |fordia|
      fordia.dia = ""
      fordia.qtde = ""
    end
    dataset.add("DEDUC") do |deduc|
      deduc.xDed = ""
      deduc.vDed = ""
    end
    dataset.infRespTec.CNPJ = ""
    dataset.infRespTec.xContato = ""
    dataset.infRespTec.email = ""
    dataset.infRespTec.fone = ""
    dataset.infRespTec.idCSRT = ""
    dataset.infRespTec.hashCSRT = ""
    dataset.infNFeSupl.qrCode = ""
    dataset.infNFeSupl.urlChave = ""
    xml, hash = dataset.gerarNF

    assert_equal xml, ""
    assert_equal hash, {}
  end

end
